package xyz.sxsong.paperplane.ZoteroAPI.Model

import com.google.gson.Gson
import org.junit.Test

class ZoteroUploadAuthorizationPojoTest {

    val jsonString =
        "{\"url\":\"https:\\/\\/zoterofilestorage.s3.us-east-1.amazonaws.com\\/\",\"params\":{\"key\":\"2ffa274615019aace7bebf633721d881\",\"acl\":\"private\",\"Content-MD5\":\"L\\/onRhUBmqznvr9jNyHYgQ==\",\"success_action_status\":\"201\",\"policy\":\"eyJleHBpcmF0aW9uIjoiMjAxOS0xMi0xMFQxMjoxODozMVoiLCJjb25kaXRpb25zIjpbeyJidWNrZXQiOiJ6b3Rlcm9maWxlc3RvcmFnZSJ9LHsia2V5IjoiMmZmYTI3NDYxNTAxOWFhY2U3YmViZjYzMzcyMWQ4ODEifSx7ImFjbCI6InByaXZhdGUifSx7IkNvbnRlbnQtTUQ1IjoiTFwvb25SaFVCbXF6bnZyOWpOeUhZZ1E9PSJ9LFsiY29udGVudC1sZW5ndGgtcmFuZ2UiLCIxMDMyNSIsIjEwMzI1Il0seyJzdWNjZXNzX2FjdGlvbl9zdGF0dXMiOiIyMDEifSx7IngtYW16LWNyZWRlbnRpYWwiOiJBU0lBVUtKTDJLT0lSSzJWT0RFQVwvMjAxOTEyMTBcL3VzLWVhc3QtMVwvczNcL2F3czRfcmVxdWVzdCJ9LHsieC1hbXotYWxnb3JpdGhtIjoiQVdTNC1ITUFDLVNIQTI1NiJ9LHsieC1hbXotZGF0ZSI6IjIwMTkxMjEwVDExMTgzMVoifSx7IngtYW16LXNlY3VyaXR5LXRva2VuIjoiSVFvSmIzSnBaMmx1WDJWakVJWFwvXC9cL1wvXC9cL1wvXC9cL1wvd0VhQ1hWekxXVmhjM1F0TVNKSU1FWUNJUUNEWFQ2dkdcLzlJTEhRSkJ2eEZ5eml1aEQ2aFRucmJTQ21Udk51a25QZ0d6d0loQUtDYWlhNUJpM3ZNMWJ5TFwvbU92eG5ueHJcL1I1U2RpUkJpeUY5c2JlZkl2WEtzb0NDTTdcL1wvXC9cL1wvXC9cL1wvXC9cL3dFUUFCb01NamsyT1RneE5URTNNakF4SWd4dmZxK1dzTkVLM2pwUmJva3FuZ0tONDdhZkV2WGc4c0RzWnE5OHpSc01RcGtjNzFzVmFtQXlVNUNYRnlaQUpCTFkzK3E1azlJT0M2dmcxaFRmYW1GKzNPUzlpNnRiS3BSalByM2hPbXFGK1dvbXQzeGliRFhOZFwvRXJoVURrMjZQUFwvMUtIRlBpSmlIYnJPOG5hUUxtSk10Q1NXNVwvdTR2RVhpelJBNzlTNkowTzFSU3BYcVFcL3FmK3ZXdlUzN3IzR0xcL0o4VitJWDdkVnoyS1V1MyswaWlXSitqeUh2SkdRMFQxV1N1WEhEQjBTZ1wvcldhbldRNEVFWUl6c3hzaFdRbnBPc2RMR2ZQZ1crb29mSUlmSHVma2xjMHowd2ZsNVRRTW9qZU1BbTU4eEI2QjRacFNzN3o0V0FoYUQzV3VQQXB2TWZtM1VTeGpkTHFjUnVReCtRTnVHNFBzRlJGck1PTHNLakpBVktjbVwvdWRMY1lCNXdtRVk3NmpSU1hPRjFuWFwvM2RRSHJJRnZDNER6SENGeU1Mekx2TzhGT3NJQ0NNZVVVQXZIWHBNS0M1dWZPQlU1SlVhY3JjWWluWFwvdjMxeGh1aVFFaDVqb1hPZFVxck1DOURRZ3k4bkRqQzdLczBVM3VuOWNSVUw5QXhRUlIwWnd1b1JVZ0U2dVV2YnBIRFdFTEw1dXAzNGlZblJtUVJqXC9jSmZBMldqeWRUSE5ldVwvVkNsRHR4Ukh4c2ZsUm96Y1dvbFwvXC82NFMyWDJvN0N4cTRQTkZWK3ZqRFI0bUpUNTQwUnJoRUcxU1JwSzVNaGU2XC9ZMFByY2tQY3B0MHdWTkRoc01EY2RYYXR3NUZVSkxiZ1JSbHRrTGl3UUNyc1dhTnJpcTdIWCtyY2dRTDhaN08wXC9oMmVRcStsUnpJdWtcL0lvTmtpbXd4Wjl5Qk5kdkVpcXdhMzR6dDJsZEpVODlXQUVZRGd5QmN4QmwzcVpWUmpGbUgweGhOV1wvRGE4aStCWVZFdXZPZjFMeDVpYXg3UElmQjZWYlwvNFVqbVwvMjFOdmxLRWExSmhhNk90ZUN0RVpON0d5djlNQkVMMTF5VVwvUlpEbE5WUktKYUg5OHRLUXVHbTkyZ2FSVW02K0E9PSJ9XX0=\",\"x-amz-algorithm\":\"AWS4-HMAC-SHA256\",\"x-amz-credential\":\"ASIAUKJL2KOIRK2VODEA\\/20191210\\/us-east-1\\/s3\\/aws4_request\",\"x-amz-date\":\"20191210T111831Z\",\"x-amz-signature\":\"5d99ae1de6779ed343ceba348994aa16cfffea3df0da63eb55106c8f222eeedf\",\"x-amz-security-token\":\"IQoJb3JpZ2luX2VjEIX\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/wEaCXVzLWVhc3QtMSJIMEYCIQCDXT6vG\\/9ILHQJBvxFyziuhD6hTnrbSCmTvNuknPgGzwIhAKCaia5Bi3vM1byL\\/mOvxnnxr\\/R5SdiRBiyF9sbefIvXKsoCCM7\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/wEQABoMMjk2OTgxNTE3MjAxIgxvfq+WsNEK3jpRbokqngKN47afEvXg8sDsZq98zRsMQpkc71sVamAyU5CXFyZAJBLY3+q5k9IOC6vg1hTfamF+3OS9i6tbKpRjPr3hOmqF+Womt3xibDXNd\\/ErhUDk26PP\\/1KHFPiJiHbrO8naQLmJMtCSW5\\/u4vEXizRA79S6J0O1RSpXqQ\\/qf+vWvU37r3GL\\/J8V+IX7dVz2KUu3+0iiWJ+jyHvJGQ0T1WSuXHDB0Sg\\/rWanWQ4EEYIzsxshWQnpOsdLGfPgW+oofIIfHufklc0z0wfl5TQMojeMAm58xB6B4ZpSs7z4WAhaD3WuPApvMfm3USxjdLqcRuQx+QNuG4PsFRFrMOLsKjJAVKcm\\/udLcYB5wmEY76jRSXOF1nX\\/3dQHrIFvC4DzHCFyMLzLvO8FOsICCMeUUAvHXpMKC5ufOBU5JUacrcYinX\\/v31xhuiQEh5joXOdUqrMC9DQgy8nDjC7Ks0U3un9cRUL9AxQRR0ZwuoRUgE6uUvbpHDWELL5up34iYnRmQRj\\/cJfA2WjydTHNeu\\/VClDtxRHxsflRozcWol\\/\\/64S2X2o7Cxq4PNFV+vjDR4mJT540RrhEG1SRpK5Mhe6\\/Y0PrckPcpt0wVNDhsMDcdXatw5FUJLbgRRltkLiwQCrsWaNriq7HX+rcgQL8Z7O0\\/h2eQq+lRzIuk\\/IoNkimwxZ9yBNdvEiqwa34zt2ldJU89WAEYDgyBcxBl3qZVRjFmH0xhNW\\/Da8i+BYVEuvOf1Lx5iax7PIfB6Vb\\/4Ujm\\/21NvlKEa1Jha6OteCtEZN7Gyv9MBEL11yU\\/RZDlNVRKJaH98tKQuGm92gaRUm6+A==\"},\"uploadKey\":\"95a600c1d128754509a3a49ee5e01eee\"}"

    @Test
    fun testSerialization() {
        val o = Gson().fromJson(jsonString, ZoteroUploadAuthorizationPojo::class.java)
        assert(o != null)
        assert(o.params.key == "2ffa274615019aace7bebf633721d881")
        assert(o.uploadKey == "95a600c1d128754509a3a49ee5e01eee")
    }
}